# Execution Plan（並行実行計画）

## 依存関係グラフ

```
001 ─┬→ 002
     └→ 003 → 004 ─┬→ 005 → 006 → 007 ─┐
                    ├→ 008 → 009 ────────┼→ 010 → 011
                    ├→ 012 ──────┐       │
                    └→ 013 ──┐   │       │
                             ├→ 014 → 016 ─┬→ 017 ─┬→ 018
015 ─────────────────────────┘              │       └→ 019
                                            │
                    012 → 020               │
                    013 → 021               │
                    014 + 015 → 022         │
                    008 ────────────────────┘
```

## ウェーブ別実行計画

各ウェーブ内のタスクは**並行実行可能**。次のウェーブは前のウェーブの完了後に着手する。

### Wave 1（並行: 2タスク）

| # | タスク | 依存 |
|---|--------|------|
| 001 | Vite + Svelte + TS テンプレ生成 | なし |
| 015 | `rng.ts`：seed対応RNG | なし |

> 015 は純粋なロジックでプロジェクト構成に依存しないため、001 と並行可能。
> ただし worktree は 001 完了後のプロジェクト上で作業するため、**実質的には 001 を先に単独実行**し、015 は Wave 2 以降で着手するのが現実的。

### Wave 2（並行: 2タスク）

| # | タスク | 依存 |
|---|--------|------|
| 002 | GitHub Pages デプロイ設定 | 001 |
| 003 | `players.json` 仮データ作成 | 001 |

### Wave 3（単独）

| # | タスク | 依存 |
|---|--------|------|
| 004 | `Player` 型定義 | 003 |

### Wave 4（並行: 4タスク）★最大並行数

| # | タスク | 依存 |
|---|--------|------|
| 005 | `players.json` fetch → store | 003, 004 |
| 008 | `lineupStore` 実装 | 004 |
| 012 | `rates.ts` イベント率算出 | 004 |
| 013 | `rules.ts` 走者状態更新 | 004 |

> 004（型定義）が完了すると、UIストア・ロジック系が一斉に着手可能になる分岐点。

### Wave 5（並行: 4タスク）

| # | タスク | 依存 |
|---|--------|------|
| 006 | フィルタ＋検索＋ソート | 005 |
| 009 | `LineupPanel` UI | 008 |
| 014 | `simulate.ts` 1試合×N | 012, 013, 015 |
| 020 | 率計算のテスト | 012 |
| 021 | 進塁ルールのテスト | 013 |

> UI系（006, 009）とロジック系（014, 020, 021）が完全に独立して進行可能。

### Wave 6（並行: 3タスク）

| # | タスク | 依存 |
|---|--------|------|
| 007 | `PlayerCard` + `PlayerList` | 006 |
| 016 | `sim.worker.ts` Worker化 | 014 |
| 022 | seed固定再現テスト | 014, 015 |

### Wave 7（並行: 2タスク）

| # | タスク | 依存 |
|---|--------|------|
| 010 | PlayerCard「追加」→枠セット | 007, 009 |
| 017 | `SimulationPanel` | 008, 016 |

### Wave 8（並行: 3タスク）★最終ウェーブ

| # | タスク | 依存 |
|---|--------|------|
| 011 | 枠クリア／全クリア／入れ替え | 009, 010 |
| 018 | `StatsTable` 打者別率・結果 | 012, 017 |
| 019 | 得点分布の表示 | 017 |

## サマリ

| 項目 | 値 |
|------|-----|
| 総タスク数 | 22 |
| 総ウェーブ数 | 8 |
| 最大並行数 | 4〜5（Wave 4, 5） |
| クリティカルパス | 001 → 003 → 004 → 012/013 → 014 → 016 → 017 → 018/019 |
| UI系クリティカルパス | 001 → 003 → 004 → 005 → 006 → 007 → 010 → 011 |

## 2つの独立した流れ

Wave 4 以降、大きく **UI系** と **ロジック系** の2レーンに分かれる:

- **UI レーン**: 005 → 006 → 007 → 010 → 011
- **ロジックレーン**: 012 + 013 + 015 → 014 → 016 → 017 → 018/019

この2レーンは Wave 7（010, 017）まで独立しており、**常に2並行**で進められる。
Wave 7 で合流し、Wave 8 で最終統合される。
