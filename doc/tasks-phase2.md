# Phase 2: UIデザインブラッシュアップ

## 背景

Phase 0/1 で機能は揃ったが、UIは「動く」レベルに留まっている。
Webデザイナー観点で、ビジュアル品質・一貫性・UXを改善する。

---

## 1. デザイントークンの統一（CSS Custom Properties）

### 現状の問題

* 色がハードコードで散在（赤: `#dc2626`, `#c00`, `#fca5a5` 等。灰色: `#ccc`, `#d1d5db`, `#d0d7de`, `#ddd`）
* フォントサイズが 0.7rem〜1.1rem まで場当たり的
* 余白パターン（gap, padding, margin）がコンポーネントごとにバラバラ
* border-radius が 3px/4px/6px/8px と不統一

### やること

* `src/styles/tokens.css` を新規作成し、CSS Custom Properties でデザイントークンを定義
  * カラーパレット（primary, danger, neutral 各段階）
  * フォントサイズ（xs, sm, base, lg, xl）
  * 余白（xs, sm, md, lg, xl）
  * border-radius（sm, md, lg, full）
  * shadow（sm, md, lg）
  * transition duration
* `index.html` または `main.ts` でインポート
* 全コンポーネントのハードコード値をトークンに置換

---

## 2. グローバルリセット・ベーススタイル

### 現状の問題

* リセットCSS / normalize が存在しない
* フォントファミリーが未指定（ブラウザデフォルト任せ）
* body の背景色やテキスト色が未設定
* box-sizing: border-box が未設定

### やること

* `src/styles/global.css` を新規作成
  * box-sizing: border-box（全要素）
  * フォントファミリー: system-ui, sans-serif。数値表示用に monospace フォールバック
  * body の背景色（ニュートラルグレー）、テキスト色、line-height
  * a, button, input, select のベーススタイル
  * スクロールバーの統一スタイル（webkit）

---

## 3. タイポグラフィの体系化

### 現状の問題

* 見出しサイズが場所によって異なる（h1, h3, h4 が混在、サイズ指定もバラバラ）
* 数値表示のフォントが一部のみ `font-variant-numeric: tabular-nums`
* 日本語テキストの行間が狭い

### やること

* 見出し階層を整理: h1（ページタイトル）、h2（セクション）、h3（サブセクション）
* 数値表示に一貫して `font-variant-numeric: tabular-nums` + monospace を適用
* 日本語テキストの `line-height` を 1.7〜1.8 に
* テーブル内の文字サイズを統一

---

## 4. カラースキームの洗練

### 現状の問題

* 配色がデフォルトの青+灰色で視覚的な個性がない
* 野球アプリらしさがない
* 背景色のコントラストが弱い（#fafafa vs #fff の差がほぼない）

### やること

* アプリのテーマカラーを選定（例: ダークグリーン+ゴールドで球場イメージ、またはダークネイビー+オレンジ）
* ヘッダーエリアにテーマカラーを適用
* セクション背景色にメリハリをつける
* アクセシビリティ: WCAG AA コントラスト比 4.5:1 以上を確保

---

## 5. ヘッダー・ナビゲーションの改善

### 現状の問題

* h1 が素のテキスト。アプリらしさがない
* タブが小さく、アクティブ状態の視認性が弱い
* タブの下線トリックが脆い（border-bottom overlap）

### やること

* アプリヘッダーを作成: ロゴ/タイトル + テーマカラー背景
* タブをヘッダー内に統合し、大きく明確なアクティブインジケータを付ける
* タブにアイコン（SVG or Unicode: ⚾ 打線作成、📊 シミュレーション）を追加

---

## 6. 選手カードの改善

### 現状の問題

* カードの境界が薄く、カード間の区切りが曖昧
* hover 効果がない（クリッカブルに見えない）
* 「追加」「詳細」ボタンが小さすぎて押しにくい
* ボタンが常時表示でカード面積を圧迫

### やること

* カードに hover で軽い shadow + transform: translateY(-1px) を追加
* ボタンをカード hover 時のみ表示（または footer エリアに分離）
* ボタンサイズを最低 44x44px のタッチターゲットサイズに近づける
* カードに選手のポジションや打率等の「ひと目で分かる指標バッジ」を追加検討

---

## 7. 打線パネルのビジュアル改善

### 現状の問題

* 打順枠が横並び要素（番号+名前+ボタン）で窮屈
* 選択中の枠のハイライトが薄い青で目立たない
* ドラッグ&ドロップで並べ替えできない（↑↓ボタンのみ）
* 操作ボタン（↑↓×）が小さすぎる

### やること

* 打順枠のデザインをリッチに: 左に大きな打順番号、右にアクション
* 選択中枠を明確にハイライト（左ボーダーにテーマカラー太線、背景色をより濃く）
* 操作ボタンのサイズを拡大（最低 32x32px）
* 空枠にドラッグ&ドロップ対応を検討（後続フェーズでも可）
* 全クリア・シミュレーション開始ボタンのスタイルを統一

---

## 8. モーダルの改善

### 現状の問題

* モーダルの開閉にアニメーションがない（唐突に出現/消滅）
* テーブルが詰まっていて読みにくい
* モーダル内のテーブルスタイルが他と不統一

### やること

* フェードイン/アウト + スケールアニメーション（CSS transition/animation）
* テーブルの行間・パディングを広げ、交互行の背景色（zebra stripe）を追加
* テーブルスタイルを共通化（tokens.css またはグローバルクラス）

---

## 9. テーブルの共通スタイル化

### 現状の問題

* SimulationPanel, SimulationSummary, StatsTable, LineupSearchPanel でテーブルスタイルが重複
* ボーダー色、パディング、ヘッダー背景色がそれぞれ微妙に異なる
* スピナーアニメーションも2箇所で重複定義

### やること

* `src/styles/tables.css` を新規作成し、共通テーブルクラスを定義
  * `.table-base`: border-collapse, width, font-size
  * `.table-header`: 背景色、font-weight、text-align
  * `.table-cell`: padding、border
  * `.table-numeric`: text-align right, tabular-nums
  * `.table-zebra tr:nth-child(even)`: 交互行背景
* スピナーアニメーションをグローバルに1回定義

---

## 10. SimulationSummary の視認性向上

### 現状の問題

* 平均得点などの数値が表の中に埋もれて目立たない
* 得点分布が `<details>` で折りたたまれており、気付きにくい

### やること

* 主要指標（平均、中央値）を大きなカード/バッジで目立たせる（フォントサイズ 2rem+ で強調）
* P10/P90 をサブ指標として控えめに配置
* 得点分布をバーチャート（CSS のみで実装可）で視覚化

---

## 11. 探索結果の表示改善

### 現状の問題

* 打順が「選手名→選手名→...」のテキスト羅列で読みにくい
* 上位打線と現在打線の差が分からない
* 結果テーブルが横に広がり、小画面で崩れる

### やること

* 打順を横一列のバッジまたはチップで表示（番号+名前を小さなタグで）
* 現在打線との差分をハイライト（入れ替わった打順位置を色付き表示）
* 「この打順を採用」ボタンで lineupStore に反映する機能を追加
* テーブルのレスポンシブ対応（横スクロール or カード型に切替）

---

## 12. レスポンシブ対応の強化

### 現状の問題

* 2カラムレイアウトがモバイル幅で崩れる（flex がそのまま縮む）
* 打線パネルの min-width: 220px が狭い画面で横スクロールを発生させる
* タブの文字が小画面で見切れる可能性

### やること

* ブレークポイント設定（768px 以下でシングルカラムに切替）
* モバイル: 打線パネルを下に配置（または drawer/bottom sheet 化）
* タブを小画面でアイコンのみ表示に切替
* カードグリッドの minmax を画面幅に応じて調整
* `meta viewport` は設定済み（確認のみ）

---

## 13. ローディング・エラー状態のUX

### 現状の問題

* 初期ローディング（players.json fetch）がテキストのみ（「Loading players...」）
* エラー表示が赤テキストだけで目立たない
* シミュレーション実行中のフィードバックが弱い

### やること

* 初期ローディングにスケルトン画面またはスピナーを追加
* エラー表示をアラートバナー化（アイコン + 背景色 + リトライボタン）
* シミュレーション実行中にプログレスバー（不確定型でも可）を追加

---

## 14. マイクロインタラクション

### 現状の問題

* 打線への選手追加時にフィードバックがない
* タブ切替が瞬時で、画面遷移感がない
* ボタンクリック時のフィードバックが hover 色変化のみ

### やること

* 打線追加時: スロットに短いハイライトアニメーション（pulse / flash）
* タブ切替: コンテンツのフェードまたはスライドトランジション
* ボタン: active 時の scale(0.97) で「押した感」
* 打線完成時: 完成メッセージまたは枠全体の色変化でフィードバック

---

## 15. アクセシビリティ（a11y）

### 現状の問題

* LineupSlot に `aria-pressed` はあるが、他のインタラクティブ要素に aria 属性がない
* モーダルにフォーカストラップがない（Tab キーでモーダル外にフォーカスが移る）
* 色のみで情報を伝えている箇所がある（選択中の青、エラーの赤）
* キーボードナビゲーションが考慮されていない

### やること

* モーダルにフォーカストラップを実装
* 全インタラクティブ要素に適切な `aria-label` / `role` を追加
* 色に加えてアイコン / テキスト / ボーダー等で状態を伝える
* Tab / Enter / Space でのキーボード操作を検証・修正
* `prefers-reduced-motion` メディアクエリでアニメーションを無効化するオプション
