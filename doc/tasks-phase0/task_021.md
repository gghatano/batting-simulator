# Task 021: 進塁ルールのテスト

## フェーズ

6. テスト

## 依存タスク

* Task 013

## 内容

`rules.ts` の `applyEvent` 関数のユニットテストを作成する。

### やること

* `src/lib/sim/__tests__/rules.test.ts` を作成
* テストケース:

  **BB/HBP:**
  1. 無走者 + BB → 打者1塁、0得点
  2. 満塁 + BB → 1得点、満塁維持
  3. 1塁のみ + BB → 1塁2塁、0得点

  **1B:**
  4. 無走者 + 1B → 打者1塁、0得点
  5. 走者3塁 + 1B → 1得点、打者1塁
  6. 1塁2塁 + 1B → 2得点（2塁3塁が生還）、1塁走者2塁、打者1塁

  **2B:**
  7. 走者1塁 + 2B → 1塁走者3塁、打者2塁、0得点
  8. 満塁 + 2B → 2得点（3塁2塁が生還）、1塁→3塁、打者2塁

  **3B:**
  9. 満塁 + 3B → 3得点、打者3塁

  **HR:**
  10. 満塁 + HR → 4得点（グランドスラム）、走者クリア
  11. 無走者 + HR → 1得点

  **K/OUT:**
  12. 満塁 + OUT → 0得点、アウト+1、走者変化なし

## 完了条件

- [ ] テストファイルが存在する
- [ ] 上記テストケースが全て PASS する
- [ ] 全イベント種別がテストでカバーされている

## テスト

* `npx vitest run src/lib/sim/__tests__/rules.test.ts`
