# Task 215: アクセシビリティ（a11y）改善

## フェーズ

Phase 2 - UIデザインブラッシュアップ

## 依存タスク

* Task 208（モーダル完成後）
* Task 205（ヘッダー/ナビ完成後）

## 内容

キーボード操作、スクリーンリーダー対応、フォーカス管理を改善する。

### やること

* **モーダルのフォーカストラップ**（PlayerDetailsModal.svelte）:
  * モーダル開放時にフォーカスをモーダル内に閉じ込める
  * Tab キーでモーダル外にフォーカスが移らないようにする
  * モーダルを閉じた時にフォーカスを元の要素に戻す
* **ARIA 属性の追加**:
  * モーダル: `role="dialog"`, `aria-modal="true"`, `aria-labelledby`
  * タブ: `role="tablist"`, `role="tab"`, `aria-selected`, `role="tabpanel"`
  * ボタン: 適切な `aria-label`（「×」→ `aria-label="閉じる"`、「↑」→ `aria-label="上に移動"` 等）
  * エラーメッセージ: `role="alert"`, `aria-live="polite"`
* **色以外の状態表現**:
  * 選択中の打順枠: 色に加えて太線ボーダー + アイコン（▶）
  * エラー: 色に加えてアイコン（⚠️）
  * 成功: 色に加えてチェックマーク
* **キーボード操作**:
  * タブ切替: ← → キーで移動
  * 打順枠: ← → ↑ ↓ キーで移動
  * 全インタラクティブ要素がフォーカス可能で、フォーカスリングが見える
* **フォーカスリング**:
  * `outline` をカスタマイズ（テーマカラーの 2px outline-offset 2px）
  * `:focus-visible` のみに適用（マウスクリックではリング非表示）

## 完了条件

- [ ] モーダルにフォーカストラップが実装されている
- [ ] 主要要素に適切な ARIA 属性がある
- [ ] 色以外の手段（アイコン・テキスト・ボーダー）で状態が伝わる
- [ ] Tab キーで全インタラクティブ要素にフォーカスが移る
- [ ] フォーカスリングが `:focus-visible` のみで表示される
- [ ] `npm run build` が成功する

## テスト

* 手動確認: Tab キーのみでアプリの全機能を操作できる
* 手動確認: モーダル内でTab → フォーカスがモーダル内にとどまる
* 手動確認: スクリーンリーダー（macOS VoiceOver）で主要操作を確認
