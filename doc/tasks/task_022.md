# Task 022: seed固定で結果が再現するテスト

## フェーズ

6. テスト

## 依存タスク

* Task 014
* Task 015

## 内容

seed を固定してシミュレーションを実行し、結果が再現することを確認するテストを作成する。

### やること

* `src/lib/sim/__tests__/simulate.test.ts` を作成
* テストケース:

  **RNG 再現性:**
  1. 同一 seed で `createRng` を2回生成 → 100個の乱数列が完全一致
  2. 異なる seed → 乱数列が異なる

  **シミュレーション再現性:**
  3. 同一打線 + 同一 seed + 同一 N → `simulateN` の結果（mean/median/p10/p90）が完全一致
  4. seed を変える → 結果が異なる（高確率で）

  **境界ケース:**
  5. 全打者 pOUT=1.0 → 全試行0得点、mean=0, median=0
  6. 全打者 pHR=1.0 → 得点が確定的に計算可能（9回×打者数で算出可能な値と一致）
  7. N=1 → 結果が返る（クラッシュしない）

## 完了条件

- [ ] テストファイルが存在する
- [ ] 上記テストケースが全て PASS する
- [ ] seed 固定で結果の完全再現が保証される

## テスト

* `npx vitest run src/lib/sim/__tests__/simulate.test.ts`
